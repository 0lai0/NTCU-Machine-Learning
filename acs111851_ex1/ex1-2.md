這邊程式碼我採用 K-Means 聚類結合馬氏距離（Mahalanobis Distance）進行信用卡詐欺檢測資料集的異常檢測

由於信用卡詐欺資料集特性：
該資料集高度不平衡，正常交易（Class=0）遠多於詐欺交易（Class=1）。
特徵數量多（29 個特徵，包括 28 個 PCA 降維後的特徵 V1-V28 和 Amount）。
詐欺交易通常表現為異常值，與正常交易在特徵空間中的分佈有顯著差異。

K-Means:
通過將正常交易聚類，假設詐欺交易是會偏離正常交易的聚類中心，從而檢測出詐欺資料的異常。

馬氏距離:
馬氏距離則考慮了特徵間的協方差結構，相比歐幾里得距離更適合檢測多維數據中的異常值。
它能夠捕捉數據分佈的形狀和尺度，對於信用卡詐欺這種高維、不平衡數據特別有效。

參數調整的部分與細節
參數影響模型性能：
K-Means 的聚類數（K值）和、PCA 的保留變異比例、樣本大小和異常檢測閾值
會直接影響模型的精確率（precision）、召回率（recall）和 F1 分數。
這些參數可以通過網格搜尋（Grid Search）進行調優，以在高精確率和合理召回率之間取得平衡。

信用卡詐欺檢測的目的：
高精確率：避免將正常交易誤判為詐欺（假陽性），因為誤報會影響用戶體驗。
合理召回率：儘量檢測出所有詐欺交易（真陽性），但不能過分追求召回率而犧牲精確率。
程式碼中使用 score = 0.85 * precision + 0.15 * recall 作為評估指標，表明更重視精確率，這與實際應用中減少誤報的需求一致。

程式碼中參數調整的詳細說明:

資料預處理的部分
#data = data.drop(['Time'], axis=1)
#data['Amount'] = StandardScaler().fit_transform(data['Amount'].values.reshape(-1, 1))

資料預處理上先移除了 Time 欄位，Time 欄位表示交易的時間戳，對於異常檢測跟詐欺模式識別無直接貢獻，且可能引入噪音。

影響：簡化特徵空間，聚焦於與詐欺相關的特徵（如 V1-V28 和 Amount）。

標準化 Amount 欄位：
原因：Amount 欄位的數值範圍與其他特徵（V1-V28，已由 PCA 標準化）不一致，標準化確保所有特徵的尺度統一，避免某個特徵對距離計算的過度影響。

調整方式：使用 StandardScaler 將 Amount 轉換為均值 0、標準差 1 的分佈。

影響：提高 K-Means 和馬氏距離計算的穩定性和準確性。

PCA 降維的操作
pca_variances = [0.96, 0.97, 0.98]
pca = PCA(n_components=pca_var, random_state=RANDOM_SEED)
x_train_pca = pca.fit_transform(x_train)
x_test_pca = pca.transform(x_test)

參數：
pca_variances=[0.96, 0.97, 0.98]：PCA 保留的變異比例，分別測試 96%、97%、98%。
n_components=pca_var：自動選擇主成分數量以保留指定的變異比例。

因為信用卡詐欺資料集共有 29 個特徵，高維數據可能導致計算成本高且存在影響不大的特徵。
PCA 通過保留主要變異方向來降低維度，減少噪音並加速模型計算。
我的程式中測試了幾個不同的變異比例（96%、97%、98%）目的在保留足夠信息和降低維度之間找到一個平衡點。

調整方式：
選擇較高的變異比例（接近 1）以保留大部分信息，但避免過高（如 0.99）以減少維度。
通過網格搜尋測試不同比例，評估對最終 F1 分數的影響。



